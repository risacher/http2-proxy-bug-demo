<html>
<head> 
<script src="/socket.io/socket.io.js"></script>
</head>
<body>
<p>Hello sockettest</P>
<div id="log">log</div>
</body>
<script>

  var parts = document.location.pathname.split('/')                                                 
  , base = parts.slice(0, parts.length - 1).join('/') + '/'                                         
  , resource = base + 'socket.io';                                                                  
  var socket = io.connect(window.location.origin, { path: resource, transports: ['websocket'] });                                

//  var socket = io({transports:['websocket']});
  socket.on('connect', ()=> {
    if (socket.io.engine.transport.polling) {
      document.querySelector('#log').innerHTML= "Connected, but polling";
    } else {
      document.querySelector('#log').innerHTML= "Connected, and not polling!";
    }
  }
  ); 
</script>
</html>
